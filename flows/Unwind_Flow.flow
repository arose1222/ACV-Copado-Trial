<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <name>Submit_for_Unwind_Approval</name>
        <label>Submit for Unwind Approval</label>
        <locationX>1733</locationX>
        <locationY>338</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>confirmationScreen</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>varCaseId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>Approval_For_Unwind</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>51.0</apiVersion>
    <assignments>
        <name>Record_Id_Auction_Id</name>
        <label>Record Id = Auction Id</label>
        <locationX>475</locationX>
        <locationY>229</locationY>
        <assignmentItems>
            <assignToReference>recordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>svarCase.Auction_Number__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Auction</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>blankChoice</name>
        <choiceText>-none-</choiceText>
        <dataType>String</dataType>
    </choices>
    <decisions>
        <name>Auction_or_Case</name>
        <label>Auction or Case?</label>
        <locationX>180</locationX>
        <locationY>233</locationY>
        <defaultConnector>
            <targetReference>Get_Auction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Auction</defaultConnectorLabel>
        <rules>
            <name>Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>500</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Case</targetReference>
            </connector>
            <label>Case</label>
        </rules>
    </decisions>
    <decisions>
        <name>Can_the_unwind_be_resubmitted</name>
        <label>Can the unwind be resubmitted?</label>
        <locationX>596</locationX>
        <locationY>544</locationY>
        <defaultConnector>
            <targetReference>UnwindAlreadyExist</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>YesItCan</name>
            <conditionLogic>1 OR 2 OR 3 OR 4</conditionLogic>
            <conditions>
                <leftValueReference>varCaseStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed (Not Approved)</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varCaseStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varCaseStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed (Rewound)</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varCaseStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed (Resold)</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Does_Auction_Have_a_Saved_Auction_ID</targetReference>
            </connector>
            <label>YesItCan</label>
        </rules>
    </decisions>
    <decisions>
        <name>Can_User_Auto_approve</name>
        <label>Can User Auto-approve?</label>
        <locationX>1551</locationX>
        <locationY>324</locationY>
        <defaultConnector>
            <targetReference>Submit_for_Unwind_Approval</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Nope</defaultConnectorLabel>
        <rules>
            <name>autoApproveYep</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RunningUserCanUnwindCheckBox</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UnwindConfirmation</targetReference>
            </connector>
            <label>Yep</label>
        </rules>
    </decisions>
    <decisions>
        <description>The decision to check if the auction ended successfully</description>
        <name>Did_Auction_end_successfully</name>
        <label>Did Auction end successfully?</label>
        <locationX>173</locationX>
        <locationY>563</locationY>
        <defaultConnector>
            <targetReference>Auction_didn_t_end_successfully</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes2</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>svarAuction.status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>counter_accepted</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>svarAuction.status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>counter_original_accepted</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>svarAuction.status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ended_accepted</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Case_Record_Types</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if Auction Has a Saved Auction ID</description>
        <name>Does_Auction_Have_a_Saved_Auction_ID</name>
        <label>Does Auction Have a Saved Auction ID?</label>
        <locationX>788</locationX>
        <locationY>534</locationY>
        <defaultConnector>
            <targetReference>Error_Contact_System_Administrator</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Saved Auction ID is Present</defaultConnectorLabel>
        <rules>
            <name>Saved_Auction_ID_is_Present</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>svarAuction.Saved_Auction_ID__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Screen_1_Collect_Unwind_Details</targetReference>
            </connector>
            <label>Saved Auction ID is Present</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_this_an_unwind_for_arb</name>
        <label>Is this an unwind for arb?</label>
        <locationX>975</locationX>
        <locationY>576</locationY>
        <defaultConnector>
            <targetReference>IsvehicleLocationOther</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Unwind_is_result_of_arb</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>UnwindReasonOptions</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Arbitration</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Unwind_Is_For_Arb</targetReference>
            </connector>
            <label>Unwind is result of arb</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsThereCurrentlyAnUnwindCase</name>
        <label>IsThereCurrentlyAnUnwindCase</label>
        <locationX>601</locationX>
        <locationY>366</locationY>
        <defaultConnector>
            <targetReference>Can_the_unwind_be_resubmitted</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Nope</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>PleaseBeEmpty</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Does_Auction_Have_a_Saved_Auction_ID</targetReference>
            </connector>
            <label>Nope</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsvehicleLocationOther</name>
        <label>IsvehicleLocationOther</label>
        <locationX>981</locationX>
        <locationY>352</locationY>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Vehicle_Location</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Other</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Need_to_transport_vehicle</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>No</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>EnterExplanation</targetReference>
            </connector>
            <label>Yes!</label>
        </rules>
        <rules>
            <name>No</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Vehicle_Location</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Other</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Need_to_transport_vehicle</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Resolution_Queue</targetReference>
            </connector>
            <label>No!</label>
        </rules>
        <rules>
            <name>Yesinput_transport</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Vehicle_Location</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Other</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Need_to_transport_vehicle</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Enter_Explaination</targetReference>
            </connector>
            <label>Yesinput+transport</label>
        </rules>
        <rules>
            <name>transportationNotes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Need_to_transport_vehicle</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Vehicle_Location</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Other</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Please_Input_Transportation_Notes1</targetReference>
            </connector>
            <label>transportationNotes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_none_left_on_unwind</name>
        <label>Was &quot;none&quot; left on unwind?</label>
        <locationX>738</locationX>
        <locationY>209</locationY>
        <defaultConnector>
            <targetReference>Is_this_an_unwind_for_arb</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>None_left_on_unwind</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Unwind_Reason</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>blankChoice</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Unwind_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>blankChoice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>None_was_left_on_initial_screen</targetReference>
            </connector>
            <label>None left on unwind</label>
        </rules>
    </decisions>
    <description>Deleted title processing from the flow. System context for record level access, so fields can be read-only on page layout while allowing users to create using flow</description>
    <dynamicChoiceSets>
        <name>AuctionStatus</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>status__c</picklistField>
        <picklistObject>Auction__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Diagnosis_Provided</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Unwind_Diagnosis_Provided__c</picklistField>
        <picklistObject>Case</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>NeedTrasportation</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Need_Trans__c</picklistField>
        <picklistObject>Case</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>UnwindReason</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Unwind_Reason__c</picklistField>
        <picklistObject>Case</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>UnwindReasonOptions</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Unwind_Reason__c</picklistField>
        <picklistObject>Case</picklistObject>
        <sortOrder>Asc</sortOrder>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>UnwindType</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Unwind_Type__c</picklistField>
        <picklistObject>Case</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Vehiclelocation</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Vehicle_Location__c</picklistField>
        <picklistObject>Case</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>Was_a_diagnosis_provided</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Unwind_Diagnosis_Provided__c</picklistField>
        <picklistObject>Case</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>WasDiagnosisProvided</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Unwind_Diagnosis_Provided__c</picklistField>
        <picklistObject>Case</picklistObject>
    </dynamicChoiceSets>
    <formulas>
        <name>RunningUserCanUnwindCheckBox</name>
        <dataType>Boolean</dataType>
        <expression>{!$User.Can_Unwind__c}</expression>
    </formulas>
    <formulas>
        <name>varUserIDs</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <interviewLabel>Unwind Flow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Unwind Flow</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Case</name>
        <label>Create Case</label>
        <locationX>1243</locationX>
        <locationY>374</locationY>
        <assignRecordIdToReference>varCaseId</assignRecordIdToReference>
        <connector>
            <targetReference>LookupCaseNumber</targetReference>
        </connector>
        <inputAssignments>
            <field>Arb_Offer_Final__c</field>
            <value>
                <elementReference>What_was_ACV_s_final_agreed_to_offer</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Arb_Offer_Initial__c</field>
            <value>
                <elementReference>What_was_ACV_s_initial_offer</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Auction_Number__c</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Buyer_Requested_Arb_Amount__c</field>
            <value>
                <elementReference>How_much_did_the_buyer_request</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>Description</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Explanation_of_other_Vehicle_Location__c</field>
            <value>
                <stringValue>{!Please_input_the_physical_address_of_vehicle_location}{!Explanation_for_Vehicle_Location}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Need_Trans__c</field>
            <value>
                <elementReference>Need_to_transport_vehicle</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>varQueueId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>varCaseRecordTypeId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>New</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Unwind Reason: {!Unwind_Reason}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Transportation_Notes__c</field>
            <value>
                <stringValue>{!Please_input_transportation_notes}{!Please_enter_transportation_details}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Unwind_Diagnosis_Provided__c</field>
            <value>
                <elementReference>WasDiagnosisProvided</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Unwind_Reason__c</field>
            <value>
                <elementReference>Unwind_Reason</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Unwind_Type__c</field>
            <value>
                <elementReference>Unwind_Type</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Vehicle_Location__c</field>
            <value>
                <elementReference>Vehicle_Location</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordCreates>
    <recordLookups>
        <name>Get_Auction</name>
        <label>Get Auction</label>
        <locationX>182</locationX>
        <locationY>367</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Did_Auction_end_successfully</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Auction__c</object>
        <outputReference>svarAuction</outputReference>
        <queriedFields>Name</queriedFields>
        <queriedFields>Seller_Dealership__c</queriedFields>
        <queriedFields>status__c</queriedFields>
        <queriedFields>Saved_Auction_ID__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Case</name>
        <label>Get Case</label>
        <locationX>330</locationX>
        <locationY>231</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Record_Id_Auction_Id</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputReference>svarCase</outputReference>
        <queriedFields>Auction_Number__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Case_Record_Types</name>
        <label>Get Case Record Types</label>
        <locationX>312</locationX>
        <locationY>443</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LookUpSeeIfUnwindRecordExist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Unwind</stringValue>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Case</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>varCaseRecordTypeId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Resolution_Queue</name>
        <label>Get Resolution Queue</label>
        <locationX>1083</locationX>
        <locationY>368</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Case</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Resolutions_Queue</stringValue>
            </value>
        </filters>
        <object>Group</object>
        <outputAssignments>
            <assignToReference>varQueueId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>LookupCaseNumber</name>
        <label>LookupCaseNumber</label>
        <locationX>1417</locationX>
        <locationY>351</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Can_User_Auto_approve</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseId</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputAssignments>
            <assignToReference>CaseNumber</assignToReference>
            <field>CaseNumber</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>LookUpSeeIfUnwindRecordExist</name>
        <label>LookUpSeeIfUnwindRecordExist</label>
        <locationX>451</locationX>
        <locationY>369</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>IsThereCurrentlyAnUnwindCase</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Auction_Number__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varCaseRecordTypeId</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputAssignments>
            <assignToReference>ExistingCaseNumber</assignToReference>
            <field>CaseNumber</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>PleaseBeEmpty</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCaseStatus</assignToReference>
            <field>Status</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <description>Flip the send to ACV flag to true if the user is auto approved. This is needed because auto approved unwinds will create with status already set to unwound which would not normally trigger the integration</description>
        <name>Send_to_ACV_if_user_is_auto_approved</name>
        <label>Send to ACV if user is auto approved</label>
        <locationX>2389</locationX>
        <locationY>278</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>CaseNumber</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CaseNumber</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Send_to_ACV__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <runInMode>SystemModeWithSharing</runInMode>
    <screens>
        <name>Auction_didn_t_end_successfully</name>
        <label>Auction you are trying to unwind didn&apos;t end successfully</label>
        <locationX>179</locationX>
        <locationY>728</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Auction_cannot_be_unwound</name>
            <dataType>String</dataType>
            <defaultValue>
                <stringValue>Auction {!svarAuction.Name} didn&apos;t end successfully and cannot be unwound</stringValue>
            </defaultValue>
            <fieldText>Auction can&apos;t be unwound</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>confirmationScreen</name>
        <label>confirmationScreen</label>
        <locationX>1688</locationX>
        <locationY>478</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>confirmationMessage</name>
            <fieldText>Thank you, your unwind request was successful. Your case number is {!CaseNumber}!</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Enter_Explaination</name>
        <label>Enter Explaination</label>
        <locationX>1054</locationX>
        <locationY>104</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_Resolution_Queue</targetReference>
        </connector>
        <fields>
            <name>Please_input_the_physical_address_of_vehicle_location</name>
            <dataType>String</dataType>
            <fieldText>Please input the physical address of vehicle location</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Please_input_transportation_notes</name>
            <dataType>String</dataType>
            <fieldText>Please input transportation notes</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>EnterExplanation</name>
        <label>EnterExplanation</label>
        <locationX>1180</locationX>
        <locationY>628</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Get_Resolution_Queue</targetReference>
        </connector>
        <fields>
            <name>Explanation_for_Vehicle_Location</name>
            <dataType>String</dataType>
            <fieldText>Please input the physical address of vehicle location</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Error_Contact_System_Administrator</name>
        <label>Error - Contact System Administrator</label>
        <locationX>801</locationX>
        <locationY>726</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Missing_Saved_Auction_ID</name>
            <fieldText>&lt;p&gt;Please contact your system administrator to unwind this auction as there is no Saved Auction ID present to continue.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>This screen will show if user submits unwind without Unwind Reason and/or Unwind Type.</description>
        <name>None_was_left_on_initial_screen</name>
        <label>None was left on initial screen</label>
        <locationX>820</locationX>
        <locationY>50</locationY>
        <allowBack>true</allowBack>
        <allowFinish>false</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>None_on_unwind</name>
            <fieldText>&lt;p&gt;{!Nonewasleftonunwind}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Please_Input_Transportation_Notes1</name>
        <label>Please Input Transportation Notes</label>
        <locationX>873</locationX>
        <locationY>180</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_Resolution_Queue</targetReference>
        </connector>
        <fields>
            <name>Please_enter_transportation_details</name>
            <dataType>String</dataType>
            <fieldText>Please enter transportation details</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Screen_1_Collect_Unwind_Details</name>
        <label>Screen 1: Collect Unwind Details</label>
        <locationX>645</locationX>
        <locationY>119</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Was_none_left_on_unwind</targetReference>
        </connector>
        <fields>
            <name>screen1Intro</name>
            <fieldText>You are beginning the unwind process for auction number {!svarAuction.Name}. The physical address of  vehicle must be known in order to request an unwind.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Unwind_Reason</name>
            <choiceReferences>UnwindReasonOptions</choiceReferences>
            <choiceReferences>blankChoice</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>blankChoice</defaultSelectedChoiceReference>
            <fieldText>Unwind Reason</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Unwind_Type</name>
            <choiceReferences>UnwindType</choiceReferences>
            <choiceReferences>blankChoice</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>blankChoice</defaultSelectedChoiceReference>
            <fieldText>Unwind Type</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Description</name>
            <fieldText>Description</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Vehicle_Location</name>
            <choiceReferences>Vehiclelocation</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Vehicle Location</fieldText>
            <fieldType>DropdownBox</fieldType>
            <helpText>Vehicle location must be verified before unwind request can be submitted</helpText>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Need_to_transport_vehicle</name>
            <choiceReferences>NeedTrasportation</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Need to transport vehicle?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Unwind_Is_For_Arb</name>
        <label>Unwind Is For Arb</label>
        <locationX>887</locationX>
        <locationY>448</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>IsvehicleLocationOther</targetReference>
        </connector>
        <fields>
            <name>How_much_did_the_buyer_request</name>
            <dataType>Currency</dataType>
            <defaultValue>
                <elementReference>BuyerRequestedArbAmount</elementReference>
            </defaultValue>
            <fieldText>How much did the buyer request?</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>0</scale>
        </fields>
        <fields>
            <name>What_was_ACV_s_initial_offer</name>
            <dataType>Currency</dataType>
            <defaultValue>
                <elementReference>What_was_ACV_s_initial_offer</elementReference>
            </defaultValue>
            <fieldText>What was ACV&apos;s initial offer?</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>0</scale>
        </fields>
        <fields>
            <name>What_was_ACV_s_final_agreed_to_offer</name>
            <dataType>Currency</dataType>
            <defaultValue>
                <elementReference>What_was_ACV_s_final_agreed_to_offer</elementReference>
            </defaultValue>
            <fieldText>What was ACV&apos;s final offer before submitting for unwind?</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>0</scale>
        </fields>
        <fields>
            <name>provided_diagnosis</name>
            <choiceReferences>WasDiagnosisProvided</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Was a diagnosis provided?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>UnwindAlreadyExist</name>
        <label>UnwindAlreadyExist</label>
        <locationX>591</locationX>
        <locationY>730</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>UnwindExists</name>
            <fieldText>An OPEN Unwind Case already exists for this auction or a previous unwind case for this auction has been marked with the closed status of &quot;Final Rejection&quot;. The Case number is &lt;a href = &quot;/{!PleaseBeEmpty}&quot;&gt;{!ExistingCaseNumber}&lt;/a&gt;.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>UnwindConfirmation</name>
        <label>UnwindConfirmation</label>
        <locationX>2124</locationX>
        <locationY>278</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Send_to_ACV_if_user_is_auto_approved</targetReference>
        </connector>
        <fields>
            <name>UnwindCreatedConfirmationScreen</name>
            <fieldText>Unwind case was created!
Case number is {!CaseNumber}.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Auction_or_Case</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>Nonewasleftonunwind</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&quot;None&quot; cannot be left as Unwind Reason or Unwind Type.  Go back to previous page and correct the error(s).&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>BuyerRequestedArbAmount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
        <value>
            <elementReference>How_much_did_the_buyer_request</elementReference>
        </value>
    </variables>
    <variables>
        <name>CaseNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ExistingCaseNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PleaseBeEmpty</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>svarAuction</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Auction__c</objectType>
    </variables>
    <variables>
        <name>svarCase</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>TitleUnwindCaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>UnwindDiagnosisProvided</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseRecordTypeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCaseStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varQueueId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varTitleCaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varUserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>VehicleId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
